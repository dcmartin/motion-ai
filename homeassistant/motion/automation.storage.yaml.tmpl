###
## AUTO-GENERATED from homeassistant/motion/automation.device.yaml.tmpl
##
## - MOTION_DEVICE: ${MOTION_DEVICE}
###

##
# tidy
##

- id: motion_storage_tidy
  alias: motion_storage_tidy
  initial_state: off
  trigger:
    platform: state
    entity_id:
      - binary_sensor.motion_end
      - sensor.motion_storage_used_${MOTION_DEVICE}
      - sensor.motion_storage_available_${MOTION_DEVICE}
  condition:
    - condition: template
      value_template: >-
        {{ states('sensor.motion_storage_used_${MOTION_DEVICE}')|int(0) > states('sensor.motion_storage_available_${MOTION_DEVICE}')|int(0) }}
  action:
    - service: shell_command.motion_storage_tidy

##
# clean
##

- id: motion_storage_clean
  alias: motion_storage_clean
  initial_state: off
  trigger:
    platform: state
    entity_id:
      - binary_sensor.motion_end
      - sensor.motion_storage_used_${MOTION_DEVICE}
      - sensor.motion_storage_available_${MOTION_DEVICE}
  condition:
    - condition: template
      value_template: >-
        {{ states('sensor.motion_storage_used_${MOTION_DEVICE}')|int(0) > 70 }}
  action:
    - service: shell_command.motion_storage_clean

##
# purge
##

- id: motion_storage_purge
  alias: motion_storage_purge
  initial_state: off
  trigger:
    platform: state
    entity_id:
      - binary_sensor.motion_end
      - sensor.motion_storage_used_${MOTION_DEVICE}
      - sensor.motion_storage_available_${MOTION_DEVICE}
  condition:
    - condition: template
      value_template: >-
        {{ states('sensor.motion_storage_used_${MOTION_DEVICE}')|int(0) > 95 }}
  action:
    - service: shell_command.motion_storage_purge
