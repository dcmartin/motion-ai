###
## AUTO-GENERATED from homeassistant/motion/sensor.device_start.yaml.tmpl
##
## - MOTION_GROUP: ${MOTION_GROUP}
## - MOTION_DEVICE: ${MOTION_DEVICE}
###

- platform: mqtt
  name: motion_device_start
  qos: 2
  state_topic: '${MOTION_GROUP}/${MOTION_CLIENT}/start'
  json_attributes_topic: '${MOTION_GROUP}/${MOTION_CLIENT}/start'
  value_template: >
    {% if value_json is defined %}True{% else %}False{% endif %}

## count
- platform: template
  sensors:
    motion_device_start_camera_count:
      entity_id:
        - sensor.motion_device_start
      value_template: >-
        {% if states.sensor.motion_device_start.attributes.cameras is defined %}
          {{ states.sensor.motion_device_start.attributes.cameras | length }}
        {% else %}null{% endif %}

## names
- platform: template
  sensors:
    motion_device_start_camera_names:
      entity_id:
        - sensor.motion_device_start
      value_template: >-
        {% if states.sensor.motion_device_start.attributes.cameras is defined %}
          {%- for camera in states.sensor.motion_device_start.attributes.cameras -%}
            {% if loop.first %}[{% else %},{% endif %}
            {{- camera.name | tojson -}}
            {%- if loop.last -%}]{%- endif -%}
          {% endfor %}
        {% else %}null{% endif %}

###
## cameras
###

- platform: mqtt
  name: motion_camera_discover
  qos: 2
  state_topic: '${MOTION_GROUP}/${MOTION_CLIENT}/camera/discover'
  json_attributes_topic: '${MOTION_GROUP}/${MOTION_CLIENT}/camera/discover'
  value_template: >
    {% if value_json is defined %}True{% else %}False{% endif %}
