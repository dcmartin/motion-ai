###
# homeassistant/template/motion/person_detected.yaml
###

- unique_id: motion_person_detected_previous_velocity_measurement
  trigger:
    - platform: state
      entity_id: 'sensor.motion_person_detected_previous'
      attribute: 'velocity'
  sensor:
    - name: 'motion_person_detected_velocity_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = state_attr('sensor.motion_person_detected_previous','velocity') %}
        {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' %}
          {{ s }}
        {% else %}null{% endif %}

- unique_id: motion_person_detected_previous_movement_measurement
  trigger:
    - platform: state
      entity_id: 'sensor.motion_person_detected_previous'
      attribute: 'movement'
  sensor:
    - name: 'motion_person_detected_movement_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = state_attr('sensor.motion_person_detected_previous','movement') %}
        {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' and s|int is number and s|int < 40075 %}
          {{ s }}
        {% else %}null{% endif %}

- unique_id: motion_person_detected_previous_interval_measurement
  trigger:
    - platform: state
      entity_id: 'sensor.motion_person_detected_previous'
      attribute: 'interval'
  sensor:
    - name: 'motion_person_detected_interval_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = state_attr('sensor.motion_person_detected_previous','interval') %}
        {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' and s|int is number and s|int < 40075 %}
          {{ s }}
        {% else %}null{% endif %}

- unique_id: motion_person_detected_distance_measurement
  trigger:
    - platform: state
      entity_id: 'sensor.motion_person_detected'
      attribute: 'distance'
  sensor:
    - name: 'motion_person_detected_distance_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = state_attr('sensor.motion_person_detected','distance') %}
        {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' and s|int is number and s|int < 40075 %}
          {{ s }}
        {% else %}null{% endif %}

- unique_id: motion_person_detected_accuracy_measurement
  trigger:
    - platform: state
      entity_id: 'sensor.motion_person_detected'
      attribute: 'gps_accuracy'
  sensor:
    - name: 'motion_person_detected_accuracy_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = state_attr('sensor.motion_person_detected','gps_accuracy') %}
        {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' %}
          {{ s }}
        {% else %}null{% endif %}
