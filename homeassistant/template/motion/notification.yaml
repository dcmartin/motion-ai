###
# homeassistant/template/notification.yaml
###

- unique_id: motion_notification_count_measurement
  trigger:
    - platform: state
      entity_id: 'binary_sensor.motion_notifications'
  sensor:
    - name: 'motion_notification_count_measurement'
      state_class: 'measurement'
      device_class: 'pressure'
      unit_of_measurement: 'psi'
      state: >-
        {% set s = states('binary_sensor.motion_notifications') -%}
        {%- if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' -%}
          {%- set s = state_attr('binary_sensor.motion_notifications','count') -%}
          {%- if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' -%}
            {{- s|int -}}
          {%- else -%}null{%- endif %}
        {%- else -%}null{%- endif %}
