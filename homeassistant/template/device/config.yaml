###
# homeassistant/template/device/config.yaml
###

- unique_id: motion_devices_config_entity_registry
  trigger:
    - platform: event
      event_type: entity_registry_updated
  binary_sensor:
    - name: 'motion_devices_config_entity_registry'
      attributes:
        data: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'data' in trigger.event -%}
            {{- trigger.event.data -}}
          {%- else -%}none{%- endif -%}
        origin: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'origin' in trigger.event -%}
            {{- trigger.event.origin -}}
          {%- else -%}none{%- endif -%}
        time: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'time_fired' in trigger.event -%}
            {{- trigger.event.time_fired -}}
          {%- else -%}none{%- endif -%}
        context: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'context' in trigger.event -%}
            {{- trigger.event.context -}}
          {%- else -%}none{%- endif -%}
      state: >-
        {{- trigger is iterable and 'event' in trigger and trigger.event is iterable }}

- unique_id: motion_devices_config_device_registry
  trigger:
    - platform: event
      event_type: device_registry_updated
  binary_sensor:
    - name: 'motion_devices_config_device_registry'
      attributes:
        data: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'data' in trigger.event -%}
            {{- trigger.event.data -}}
          {%- else -%}none{%- endif -%}
        origin: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'origin' in trigger.event -%}
            {{- trigger.event.origin -}}
          {%- else -%}none{%- endif -%}
        time: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'time_fired' in trigger.event -%}
            {{- trigger.event.time_fired -}}
          {%- else -%}none{%- endif -%}
        context: >-
          {%- if trigger is iterable and 'event' in trigger and trigger.event is iterable and 'context' in trigger.event -%}
            {{- trigger.event.context -}}
          {%- else -%}none{%- endif -%}
      state: >-
        {{- trigger is iterable and 'event' in trigger and trigger.event is iterable }}
