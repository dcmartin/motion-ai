###
# homeassistant/binary_sensor/notification/moisture.yaml
###

- platform: template
  sensors:
    motion_notification_moisture_good:
      friendly_name: 'Not detected: moisture'
      attribute_templates:
        responses: >-
          {{ state_attr('binary_sensor.motion_device_moisture_good','responses') }}
        actions: >-
          {{ state_attr('binary_sensor.motion_device_moisture_good','actions') }}
        message: >-
          {#- notification -#}
          Your home moisture alarm has cleared.
        last: >-
          {{ 'unknown' }}
        details: >-
          {{ 'unknown' }}
      value_template: >-
        {{ 'unknown' }}
    motion_notification_moisture_bad:
      friendly_name: 'Detected: moisture'
      attribute_templates:
        responses: >-
          {{ state_attr('binary_sensor.motion_device_moisture_bad','responses') }}
        actions: >-
          {{ state_attr('binary_sensor.motion_device_moisture_bad','actions') }}
        message: >-
          {#- primary -#}
          {%- set primary = state_attr('sensor.motion_role_primary','friendly_name')|replace("'","") -%}
          {#- notification -#}
          Your home moisture alarm was triggered. We have notified {{ primary }} about your moisture alarm. If you are fine handling this situation on your own, press "I'm OKAY"
        last: >-
          {{ 'unknown' }}
        details: >-
          {{ 'unknown' }}
      value_template: >-
        {{ 'unknown' }}
