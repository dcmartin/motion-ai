###
# homeassistant/binary_sensor/motion/camera.yaml
###

- platform: template
  sensors:
    motion_status_camera_notify:
      friendly_name: Camera(s) notify 
      icon_template: >-
        {% if is_state('input_boolean.motion_status_camera_notify','on') %}
          {{ 'mdi:toggle-switch' }}
        {% else %}
          {{ 'mdi:toggle-switch-off' }}
        {% endif %}
      value_template: >-
        {{ is_state('input_boolean.motion_status_camera_notify','on') }}
    motion_status_camera:
      friendly_name: Camera(s) status
      device_class: connectivity
      attribute_templates:
        names: >-
          {{ state_attr('sensor.motion_actual_device_start','cameras')|map(attribute='name')|list }}
        cameras: >-
          {{ state_attr('sensor.motion_actual_device_start','cameras') }}
        latitude: >-
          {{ state_attr('sensor.motion_actual_device_start','latitude')|float }}
        longitude: >-
          {{ state_attr('sensor.motion_actual_device_start','longitude')|float }}
        group: >-
          {{ state_attr('sensor.motion_actual_device_start','group') }}
        device: >-
          {{ state_attr('sensor.motion_actual_device_start','device') }}
        client: >-
          {{ state_attr('sensor.motion_actual_device_start','client') }}
        status: >-
          {%- set s = state_attr('group.motion_status_camera', 'entity_id') -%}
          {% if s|lower != 'none' and s|lower != 'unknown' and s|lower != 'unavailable' and s|lower != 'null' %}
            [{%- for e in state_attr('group.motion_status_camera', 'entity_id') -%}
              {%- if loop.first -%}{%- else -%},{%- endif -%}
              {%- if states(e)|lower == 'on' -%}1{%- else -%}0{%- endif -%}
            {%- endfor -%}]
          {% else %}null{% endif %}
      icon_template: >-
        {% if is_state('group.motion_status_camera','on') %}
          {{ 'mdi:camera' }}
        {% else %}
          {{ 'mdi:camera-off' }}
        {% endif %}
      value_template: >-
        {{ is_state('group.motion_status_camera','on') }}
