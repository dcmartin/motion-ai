###
# homeassistant/binary_sensor/device/class_unavailable.yaml
###

- platform: template
  sensors:
    motion_device_class_unavailable:
      friendly_name: 'No unavailable devices'
      icon_template: 'mdi:home-minus'
      device_class: 'problem'
      attribute_templates:
        last: >-
          {{- 'null' -}}
        count: >-
          {{- 'null' -}}
        ids: >-
          {{- none -}}
        details: >-
          {{- none -}}
        markdown: >-
          <h2><a href="/notify-unavailable">Unavailable</a> pending</h2>
        actions: >-
          {% set id = 'device-unavailable' -%}
          {%- set interval = 5 -%}
          {%- set actions = [
              {'action': 'approve','icon':'sfsymbols:hand.thumbsup','title':'Change device settings','destructive':false},
              {'action': 'wait','icon':'sfsymbols:timer','title':'Ask again in ' + interval|string + ' minutes','destructive':false},
              {'action': 'help','icon':'sfsymbols:message','title':'Notify primary','destructive':false},
              {'action': 'deny','icon':'sfsymbols:hand.thumbsdown.fill','title':'Ignore missing device','destructive':true}
            ] -%}
          {{- '{"id":"' -}}{{- id -}}{{- '","interval":' -}}{{- interval -}}{{- ',"actions":' -}}{{- actions -}}{{- '}' }}
        responses: >-
          {% set s = ['wait','help','approve','deny'] -%}
          {{- s }}
        group: >-
          {{ 'device-notify' }}
        timestamp: >-
          {{ 'unknown' }}
        when: >-
          {{ 'unknown' }}
        response: >-
          {{ 'unknown' }}
      value_template: >-
          {{- 'unknown' -}}
