###
# homeassistant/binary_sensor/device/class.yaml
###

- platform: group
  name: motion_device_class_missing_group
  entities:
    - binary_sensor.motion_device_class_missing

- platform: group
  name: motion_device_class_unavailable_group
  entities:
    - binary_sensor.motion_device_class_unavailable

- platform: group
  name: motion_device_class_activity_group
  entities:
    - binary_sensor.motion_device_class_activity

- platform: group
  name: motion_device_class_exist_group
  entities:
    - binary_sensor.motion_device_battery_exist
    - binary_sensor.motion_device_connectivity_exist
    - binary_sensor.motion_device_current_exist
    - binary_sensor.motion_device_door_exist
    - binary_sensor.motion_device_energy_exist
    - binary_sensor.motion_device_gas_exist
    - binary_sensor.motion_device_humidity_exist
    - binary_sensor.motion_device_illuminance_exist
    - binary_sensor.motion_device_light_exist
    - binary_sensor.motion_device_moisture_exist
    - binary_sensor.motion_device_motion_exist
    - binary_sensor.motion_device_occupancy_exist
    - binary_sensor.motion_device_opening_exist
    - binary_sensor.motion_device_plug_exist
    - binary_sensor.motion_device_power_exist
    - binary_sensor.motion_device_presence_exist
    - binary_sensor.motion_device_problem_exist
    - binary_sensor.motion_device_safety_exist
    - binary_sensor.motion_device_smoke_exist
    - binary_sensor.motion_device_tamper_exist
    - binary_sensor.motion_device_temperature_exist
    - binary_sensor.motion_device_update_exist
    - binary_sensor.motion_device_vibration_exist
    - binary_sensor.motion_device_voltage_exist
    - binary_sensor.motion_device_window_exist

- platform: group
  name: motion_device_class_alarms_group
  entities:
    - binary_sensor.motion_device_battery_alarm_group
    - binary_sensor.motion_device_connectivity_alarm_group
    - binary_sensor.motion_device_current_alarm_group
    - binary_sensor.motion_device_door_alarm_group
    - binary_sensor.motion_device_energy_alarm_group
    - binary_sensor.motion_device_gas_alarm_group
    - binary_sensor.motion_device_humidity_alarm_group
    - binary_sensor.motion_device_illuminance_alarm_group
    - binary_sensor.motion_device_light_alarm_group
    - binary_sensor.motion_device_moisture_alarm_group
    - binary_sensor.motion_device_motion_alarm_group
    - binary_sensor.motion_device_occupancy_alarm_group
    - binary_sensor.motion_device_opening_alarm_group
    - binary_sensor.motion_device_plug_alarm_group
    - binary_sensor.motion_device_power_alarm_group
    - binary_sensor.motion_device_presence_alarm_group
    - binary_sensor.motion_device_problem_alarm_group
    - binary_sensor.motion_device_safety_alarm_group
    - binary_sensor.motion_device_smoke_alarm_group
    - binary_sensor.motion_device_tamper_alarm_group
    - binary_sensor.motion_device_temperature_alarm_group
    - binary_sensor.motion_device_update_alarm_group
    - binary_sensor.motion_device_vibration_alarm_group
    - binary_sensor.motion_device_voltage_alarm_group
    - binary_sensor.motion_device_window_alarm_group

- platform: template
  sensors:
    motion_device_class_exist:
      attribute_templates:
        automations: >-
          {{ 'none' }}
        total: >-
          {{ 'none' }}
        mobile: >-
          {{ 'none' }}
        local: >-
          {{ 'none' }}
        actions: >-
          {{ 'none' }}
        markdown: >-
          <h2>Class existing pending</h2>
      value_template: >-
          {{ 'unknown' }}

- platform: template
  sensors:
    motion_device_class:
      unique_id: motion_device_class
      friendly_name: All devices
      attribute_templates:
        summary: >-
          {{- 'none' -}}
        scan: >-
          {{- 'none' -}}
        ids: >-
          {{- 'none' -}}
        automations: >-
          {{- 'none' -}}
        total: >-
          {{- 'none' -}}
        unavailable: >-
          {{- 'none' -}}
        missing: >-
          {{- 'none' -}}
        found: >-
          {{- 'none' -}}
        dids: >-
          {{- 'none' -}}
        devices: >-
          {{- 'none' -}}
        areas: >-
          {{- 'none' -}}
        status: >-
          {{- 'none' -}}
        measurement: >-
          {{- 'none' -}}
        statistics: >-
          {{- 'none' -}}
        buttons: >-
          {{- 'none' -}}
        lights: >-
          {{- 'none' -}}
        media_players: >-
          {{- 'none' -}}
        switchs: >-
          {{- 'none' -}}
        responses: >-
          {%- set s = ['approve','deny','wait','help'] -%}
          {{- s -}}
        alarms: >-
          {%- set s = ['good','bad','high','low','activity','missing','unavailable','found'] -%}
          {{- s -}}
        alarm: >-
          {%- set s = ['found','missing','unavailable','activity','battery','gas','moisture','temperature','humidity','illuminance','current','presence','problem','occupancy','window'] -%}
          {{- s -}}
        high_spike: >-
          {# ['power','energy','voltage','temperature'] #}
          {%- set s = [] -%}
          {{- s -}}
        low_spike: >-
          {# ['power','energy','voltage','temperature'] #}
          {%- set s = [] -%}
          {{- s -}}
        good: >-
          {%- set s = ['connectivity','update'] -%}
          {{- s -}}
        bad: >-
          {%- set s = ['gas','moisture','problem','safety','smoke','tamper'] -%}
          {{- s -}}
        low: >-
          {%- set s = ['battery','current','temperature','illuminance','humidity','voltage'] -%}
          {{- s -}}
        high: >-
          {%- set s = ['temperature','current','humidity','voltage','energy','power','activity'] -%}
          {{- s -}}
        activity: >-
          {%- set s = ['motion','vibration','door','opening','occupancy','presence','plug','window'] -%}
          {{- s -}}
        sensor_list: >-
          {%- set s = ['battery','current','energy','humidity','illuminance','power','temperature','voltage'] -%}
          {{- s -}}
        binary_sensor_list: >-
          {%- set bs = ['battery','connectivity','door','gas','light','moisture','motion','occupancy','opening','plug','power','presence','problem','safety','smoke','tamper','update','vibration','window'] -%}
          {{- bs -}}
        categorys: >-
          {# combination of sensor_list and binary_sensor_list above #}
          {%- set s = ['battery','current','energy','humidity','illuminance','power','temperature','voltage'] -%}
          {%- set bs = ['battery','connectivity','door','gas','light','moisture','motion','occupancy','opening','plug','power','presence','problem','safety','smoke','tamper','update','vibration','window'] -%}
          {%- set s = (s + bs)|sort|unique|list -%}
          {{- s -}}
        sensors: >-
          {%- set s = ['battery','humidity','temperature'] -%}
          {{- s -}}
        binary_sensors: >-
          {%- set s = ['battery','gas','moisture','motion'] -%}
          {{- s -}}
        required: >-
          {# combination of sensors and binary_sensors above #}
          {%- set s = ['battery','gas','moisture','motion','humidity','temperature'] -%}
          {{- s -}}
        notifications: >-
          {%- set s = ['activity','missing','unavailable','found'] -%}
          {{- s -}}
        markdown: >-
          <h2>Devices pending</h2>
      value_template: >-
        {# set through automation #}
        {{- 'unknown' -}}

- platform: template
  sensors:
    motion_device_class_rescan:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_rescan','running','on') }}
    motion_device_class_missing_approve:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_missing_approve','running','on') }}
    motion_device_class_missing_deny:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_missing_deny','running','on') }}
    motion_device_class_missing_wait:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_missing_wait','running','on') }}
    motion_device_class_missing_help:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_missing_help','running','on') }}
    motion_device_class_unavailable_approve:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_unavailable_approve','running','on') }}
    motion_device_class_unavailable_deny:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_unavailable_deny','running','on') }}
    motion_device_class_unavailable_wait:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_unavailable_wait','running','on') }}
    motion_device_class_unavailable_help:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_unavailable_help','running','on') }}
    motion_device_class_activity_approve:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_activity_approve','running','on') }}
    motion_device_class_activity_deny:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_activity_deny','running','on') }}
    motion_device_class_activity_wait:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_activity_wait','running','on') }}
    motion_device_class_activity_help:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_activity_help','running','on') }}
    motion_device_class_found_approve:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_found_approve','running','on') }}
    motion_device_class_found_deny:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_found_deny','running','on') }}
    motion_device_class_found_wait:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_found_wait','running','on') }}
    motion_device_class_found_help:
      value_template: >-
        {{ is_state_attr('sensor.motion_device_class_found_help','running','on') }}
