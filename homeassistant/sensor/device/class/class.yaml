###
# sensor/device/class.yaml
###

- platform: template
  sensors:
    motion_device_class_rescan:
      friendly_name: Device scan
      attribute_templates:
        last_triggerd: >-
          {{- state_attr('automation.motion_device_class_rescan','last_triggered') -}}
        relative: >-
          {%- set s = state_attr('automation.motion_device_class_rescan','last_triggered') -%}
          {% if s|lower != 'unknown' and s|lower != 'none' and s|lower != 'unavailable' and s|lower != 'null' %}
            {{ s|relative_time }}
          {% else %}none{% endif %}
      value_template: >-
        {{- is_state('binary_sensor.motion_device_class_rescan','on') -}}

- platform: template
  sensors:
    motion_device_class_missing_approve:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_missing','approve') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Approve' }}
        {%- endif -%}
    motion_device_class_missing_deny:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_missing','deny') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Deny' }}
        {%- endif -%}
    motion_device_class_missing_wait:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_missing','wait') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Wait' }}
        {%- endif -%}
        {{- state_attr('binary_sensor.motion_device_class_missing','wait') -}}
    motion_device_class_missing_help:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_missing','help') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Help' }}
        {%- endif -%}
        {{- state_attr('binary_sensor.motion_device_class_missing','help') -}}

- platform: template
  sensors:
    motion_device_class_unavailable_approve:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_unavailable','approve') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Approve' }}
        {%- endif -%}
    motion_device_class_unavailable_deny:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_unavailable','deny') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Deny' }}
        {%- endif -%}
    motion_device_class_unavailable_wait:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_unavailable','wait') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Wait' }}
        {%- endif -%}
    motion_device_class_unavailable_help:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_unavailable','help') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Help' }}
        {%- endif -%}

- platform: template
  sensors:
    motion_device_class_activity_approve:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_activity','approve') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Approve' }}
        {%- endif -%}
    motion_device_class_activity_deny:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_activity','deny') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Deny' }}
        {%- endif -%}
    motion_device_class_activity_wait:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_activity','wait') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Wait' }}
        {%- endif -%}
    motion_device_class_activity_help:
      value_template: >-
        {%- set s = state_attr('binary_sensor.motion_device_class_activity','help') -%}
        {%- if s|lower != 'none' -%}
          {{ s.title }}
        {%- else -%}
          {{ 'Help' }}
        {%- endif -%}
