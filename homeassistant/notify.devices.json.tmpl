{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "icon": "mdi:devices",
      "title": "${MOTION_APP} at ${MOTION_SITE}: Devices",
      "views": [
        {
          "title": "DEVICES",
          "path": "all",
          "icon": "mdi:devices",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "entity": "binary_sensor.motion_alarm",
                  "show_state": false,
                  "icon": "mdi:message",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:account-supervisor",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-owner/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:home-heart",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-system/"
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class",
                  "state_not": "unknown"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_class",
                "content": "{{ state_attr(\"binary_sensor.motion_device_class\",\"markdown\") }}"
              },
              "view_layout": {
                "position": "main"
              }
            },
            {
              "type": "conditional",
              "view_layout": {
                "position": "sidebar"
              },
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class",
                  "state_not": "unknown"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "alert"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "chart_type": "line",
                "period": "hour",
                "days_to_show": 7,
                "type": "statistics-graph",
                "entities": [
                  {
                    "name": "Found",
                    "entity": "sensor.motion_alarm_found_measurement"
                  },
                  {
                    "name": "Missing",
                    "entity": "sensor.motion_alarm_missing_measurement"
                  },
                  {
                    "name": "Unavailable",
                    "entity": "sensor.motion_alarm_unavailable_measurement"
                  }
                ],
                "stat_types": [
                  "max"
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class_exist",
                  "state_not": "unknown"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "notice"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "alert"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_class_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_class_exist\",\"markdown\") }}"
              },
              "view_layout": {
                "position": "sidebar"
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class",
                  "state_not": "unknown"
                },
                {
                  "entity": "binary_sensor.motion_device_class_rescan",
                  "state_not": "on"
                },
                {
                  "entity": "binary_sensor.motion_device_class_missing",
                  "state_not": "unknown"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "info"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "notice"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "alert"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_class_missing",
                "content": "{{ state_attr(\"binary_sensor.motion_device_class_missing\",\"markdown\") }}"
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class",
                  "state_not": "unknown"
                },
                {
                  "entity": "binary_sensor.motion_device_class_rescan",
                  "state_not": "on"
                },
                {
                  "entity": "binary_sensor.motion_device_class_unavailable",
                  "state_not": "unknown"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "info"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "notice"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "alert"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_class_unavailable",
                "content": "{{ state_attr(\"binary_sensor.motion_device_class_unavailable\",\"markdown\") }}"
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_class",
                  "state_not": "on"
                },
                {
                  "entity": "input_select.motion_log_level",
                  "state_not": "critical"
                }
              ],
              "card": {
                "title": "Waiting on devices",
                "type": "entities",
                "entities": [
                  {
                    "name": "Last scan",
                    "entity": "sensor.motion_device_class_rescan",
                    "type": "attribute",
                    "attribute": "relative",
                    "secondary_info": "last-updated",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_class_rescan"
                      },
                      "confirmation": {
                        "text": "Do you want to rescan?",
                        "exemptions": null
                      }
                    },
                    "hold_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_class_rescan_all"
                      },
                      "confirmation": {
                        "text": "Do you want to rescan all?",
                        "exemptions": null
                      }
                    }
                  },
                  {
                    "entity": "binary_sensor.motion_device_class_status",
                    "name": "Discovery complete",
                    "secondary_info": "last-updated"
                  },
                  {
                    "entity": "binary_sensor.motion_device_class_status",
                    "name": "Discovered",
                    "icon": "mdi:home-plus",
                    "type": "attribute",
                    "attribute": "automations"
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_class_status",
                        "state_not": "on"
                      }
                    ],
                    "row": {
                      "entity": "binary_sensor.motion_device_class_status",
                      "name": "Missing",
                      "type": "attribute",
                      "icon": "mdi:cancel",
                      "attribute": "missing"
                    }
                  },
                  {
                    "entity": "binary_sensor.motion_device_class_measurement",
                    "name": "Measurement",
                    "icon": "mdi:ruler-square-compass"
                  },
                  {
                    "entity": "binary_sensor.motion_device_class_statistics",
                    "name": "Statistics",
                    "icon": "mdi:chart-box"
                  }
                ]
              },
              "view_layout": {
                "position": "sidebar"
              }
            },
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_class_rescan",
                      "state": "on"
                    },
                    {
                      "entity": "binary_sensor.motion_device_class",
                      "state_not": "unknown"
                    }
                  ],
                  "card": {
                    "type": "button",
                    "name": "",
                    "icon": "mdi:home-search-outline",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_class_rescan_all"
                      },
                      "confirmation": {
                        "text": "Do you want to restart device scan?",
                        "exemptions": null
                      }
                    }
                  },
                  "view_layout": {
                    "position": "sidebar"
                  }
                },
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_class_rescan",
                      "state": "off"
                    },
                    {
                      "entity": "binary_sensor.motion_device_class",
                      "state_not": "unknown"
                    }
                  ],
                  "card": {
                    "type": "button",
                    "name": "",
                    "icon": "mdi:home-search",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_class_rescan"
                      },
                      "confirmation": {
                        "text": "Do you want to rescan?",
                        "exemptions": null
                      }
                    },
                    "hold_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_class_rescan_all"
                      },
                      "confirmation": {
                        "text": "Do you want to rescan all?",
                        "exemptions": null
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "BATTERY",
          "path": "battery",
          "icon": "mdi:battery",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_battery",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/battery"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_battery_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for battery?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_battery_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_battery_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_battery_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_battery_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_battery_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_battery_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_battery_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_battery_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_battery_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_battery",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for battery sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for battery sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_battery_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF battery low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_battery",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_battery_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_battery_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_battery_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_battery",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_battery"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_battery_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_battery_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_battery",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_battery",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_battery",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_battery",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_battery_low",
                                "name": "Low battery"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_battery_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_battery_high",
                                "name": "High battery"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_battery_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_battery_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_battery_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_battery_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_battery_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_battery_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_battery_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required battery missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_battery_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_battery_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_battery_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_battery_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_battery_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "CONNECTIVITY",
          "path": "connectivity",
          "icon": "mdi:connection",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_connectivity",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/connectivity"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_connectivity_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for connectivity?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_connectivity_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_connectivity_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_connectivity_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_connectivity_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_connectivity_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_connectivity_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_connectivity_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_connectivity_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_connectivity",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for connectivity sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for connectivity sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_connectivity_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF connectivity low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_connectivity",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_connectivity_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_connectivity_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_connectivity_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_connectivity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_connectivity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_connectivity_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_connectivity_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_connectivity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_connectivity",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_connectivity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_connectivity",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_connectivity_low",
                                "name": "Low connectivity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_connectivity_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_connectivity_high",
                                "name": "High connectivity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_connectivity_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_connectivity_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_connectivity_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_connectivity_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_connectivity_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_connectivity_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_connectivity_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required connectivity missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_connectivity_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_connectivity_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_connectivity_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_connectivity_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_connectivity_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "CURRENT",
          "path": "current",
          "icon": "mdi:sine-wave",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_current",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/current"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_current_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for current?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_current_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_current_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_current_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_current_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_current_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_current_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_current_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_current_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_current_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_current",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for current sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for current sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_current_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF current low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_current",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_current_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_current_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_current_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_current",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_current"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_current_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_current_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_current",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_current",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_current",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_current",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_current_low",
                                "name": "Low current"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_current_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_current_high",
                                "name": "High current"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_current_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_current_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_current_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_current_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_current_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_current_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_current_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required current missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_current_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_current_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_current_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_current_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_current_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "DOOR",
          "path": "door",
          "icon": "mdi:door",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_door",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/door"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_door_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for door?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_door_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_door_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_door_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_door_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_door_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_door_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_door_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_door_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_door_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_door",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for door sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for door sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_door_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF door low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_door",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_door_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_door_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_door_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_door",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_door"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_door_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_door_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_door",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_door",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_door",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_door",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_door_low",
                                "name": "Low door"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_door_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_door_high",
                                "name": "High door"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_door_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_door_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_door_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_door_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_door_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_door_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_door_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required door missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_door_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_door_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_door_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_door_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_door_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "ENERGY",
          "path": "energy",
          "icon": "mdi:lightning-bolt-circle",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_energy",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/energy"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_energy_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for energy?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_energy_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_energy_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_energy_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_energy_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_energy_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_energy_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_energy_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_energy_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_energy_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_energy",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for energy sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for energy sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_energy_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF energy low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_energy",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_energy_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_energy_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_energy_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_energy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_energy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_energy_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_energy_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_energy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_energy",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_energy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_energy",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_energy_low",
                                "name": "Low energy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_energy_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_energy_high",
                                "name": "High energy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_energy_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_energy_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_energy_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_energy_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_energy_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_energy_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_energy_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required energy missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_energy_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_energy_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_energy_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_energy_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_energy_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "GAS",
          "path": "gas",
          "icon": "mdi:smoke-detector-variant",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_gas",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/gas"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_gas_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for gas?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_gas_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_gas_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_gas_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_gas_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_gas_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_gas_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_gas_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_gas_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_gas_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_gas",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for gas sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for gas sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_gas_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF gas low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_gas",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_gas_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_gas_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_gas_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_gas",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_gas"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_gas_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_gas_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_gas",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_gas",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_gas",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_gas",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_gas_low",
                                "name": "Low gas"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_gas_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_gas_high",
                                "name": "High gas"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_gas_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_gas_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_gas_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_gas_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_gas_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_gas_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_gas_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required gas missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_gas_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_gas_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_gas_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_gas_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_gas_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "HUMIDITY",
          "path": "humidity",
          "icon": "mdi:thermometer-water",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_humidity",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/humidity"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_humidity_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for humidity?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_humidity_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_humidity_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_humidity_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_humidity_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_humidity_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_humidity_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_humidity_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_humidity_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_humidity_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_humidity",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for humidity sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for humidity sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_humidity_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF humidity low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_humidity",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_humidity_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_humidity_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_humidity_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_humidity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_humidity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_humidity_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_humidity_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_humidity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_humidity",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_humidity",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_humidity",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_humidity_low",
                                "name": "Low humidity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_humidity_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_humidity_high",
                                "name": "High humidity"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_humidity_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_humidity_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_humidity_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_humidity_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_humidity_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_humidity_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_humidity_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required humidity missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_humidity_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_humidity_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_humidity_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_humidity_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_humidity_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "ILLUMINANCE",
          "path": "illuminance",
          "icon": "mdi:brightness-4",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_illuminance",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/illuminance"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_illuminance_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for illuminance?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_illuminance_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_illuminance_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_illuminance_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_illuminance_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_illuminance_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_illuminance_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_illuminance_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_illuminance_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_illuminance",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for illuminance sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for illuminance sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_illuminance_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF illuminance low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_illuminance",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_illuminance_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_illuminance_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_illuminance_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_illuminance",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_illuminance"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_illuminance_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_illuminance_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_illuminance",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_illuminance",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_illuminance",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_illuminance",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_illuminance_low",
                                "name": "Low illuminance"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_illuminance_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_illuminance_high",
                                "name": "High illuminance"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_illuminance_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_illuminance_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_illuminance_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_illuminance_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_illuminance_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_illuminance_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_illuminance_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required illuminance missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_illuminance_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_illuminance_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_illuminance_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_illuminance_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_illuminance_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "LIGHT",
          "path": "light",
          "icon": "mdi:lightbulb",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_light",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/light"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_light_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for light?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_light_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_light_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_light_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_light_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_light_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_light_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_light_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_light_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_light_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_light",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for light sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for light sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_light_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF light low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_light",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_light_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_light_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_light_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_light",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_light"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_light_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_light_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_light",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_light",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_light",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_light",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_light_low",
                                "name": "Low light"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_light_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_light_high",
                                "name": "High light"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_light_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_light_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_light_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_light_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_light_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_light_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_light_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required light missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_light_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_light_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_light_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_light_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_light_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "MOISTURE",
          "path": "moisture",
          "icon": "mdi:water",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_moisture",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/moisture"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_moisture_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for moisture?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_moisture_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_moisture_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_moisture_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_moisture_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_moisture_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_moisture_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_moisture_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_moisture_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_moisture_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_moisture",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for moisture sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for moisture sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_moisture_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF moisture low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_moisture",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_moisture_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_moisture_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_moisture_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_moisture",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_moisture"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_moisture_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_moisture_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_moisture",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_moisture",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_moisture",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_moisture",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_moisture_low",
                                "name": "Low moisture"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_moisture_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_moisture_high",
                                "name": "High moisture"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_moisture_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_moisture_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_moisture_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_moisture_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_moisture_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_moisture_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_moisture_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required moisture missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_moisture_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_moisture_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_moisture_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_moisture_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_moisture_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "MOTION",
          "path": "motion",
          "icon": "mdi:motion-sensor",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_motion",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/motion"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_motion_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for motion?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_motion_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_motion_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_motion_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_motion_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_motion_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_motion_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_motion_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_motion_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_motion_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_motion",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for motion sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for motion sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_motion_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF motion low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_motion",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_motion_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_motion_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_motion_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_motion",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_motion"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_motion_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_motion_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_motion",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_motion",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_motion",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_motion",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_motion_low",
                                "name": "Low motion"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_motion_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_motion_high",
                                "name": "High motion"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_motion_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_motion_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_motion_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_motion_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_motion_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_motion_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_motion_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required motion missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_motion_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_motion_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_motion_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_motion_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_motion_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "OCCUPANCY",
          "path": "occupancy",
          "icon": "mdi:seat",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_occupancy",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/occupancy"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_occupancy_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for occupancy?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_occupancy_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_occupancy_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_occupancy_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_occupancy_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_occupancy_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_occupancy_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_occupancy_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_occupancy_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_occupancy",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for occupancy sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for occupancy sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_occupancy_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF occupancy low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_occupancy",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_occupancy_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_occupancy_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_occupancy_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_occupancy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_occupancy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_occupancy_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_occupancy_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_occupancy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_occupancy",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_occupancy",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_occupancy",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_occupancy_low",
                                "name": "Low occupancy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_occupancy_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_occupancy_high",
                                "name": "High occupancy"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_occupancy_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_occupancy_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_occupancy_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_occupancy_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_occupancy_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_occupancy_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_occupancy_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required occupancy missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_occupancy_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_occupancy_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_occupancy_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_occupancy_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_occupancy_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "OPENING",
          "path": "opening",
          "icon": "mdi:door-open",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_opening",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/opening"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_opening_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for opening?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_opening_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_opening_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_opening_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_opening_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_opening_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_opening_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_opening_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_opening_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_opening_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_opening",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for opening sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for opening sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_opening_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF opening low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_opening",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_opening_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_opening_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_opening_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_opening",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_opening"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_opening_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_opening_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_opening",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_opening",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_opening",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_opening",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_opening_low",
                                "name": "Low opening"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_opening_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_opening_high",
                                "name": "High opening"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_opening_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_opening_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_opening_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_opening_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_opening_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_opening_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_opening_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required opening missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_opening_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_opening_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_opening_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_opening_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_opening_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "PLUG",
          "path": "plug",
          "icon": "mdi:power-socket-us",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_plug",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/plug"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_plug_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for plug?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_plug_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_plug_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_plug_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_plug_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_plug_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_plug_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_plug_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_plug_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_plug_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_plug",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for plug sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for plug sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_plug_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF plug low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_plug",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_plug_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_plug_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_plug_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_plug",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_plug"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_plug_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_plug_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_plug",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_plug",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_plug",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_plug",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_plug_low",
                                "name": "Low plug"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_plug_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_plug_high",
                                "name": "High plug"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_plug_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_plug_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_plug_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_plug_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_plug_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_plug_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_plug_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required plug missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_plug_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_plug_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_plug_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_plug_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_plug_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "POWER",
          "path": "power",
          "icon": "mdi:meter-electric",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_power",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/power"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_power_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for power?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_power_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_power_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_power_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_power_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_power_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_power_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_power_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_power_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_power_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_power",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for power sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for power sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_power_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF power low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_power",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_power_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_power_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_power_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_power",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_power"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_power_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_power_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_power",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_power",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_power",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_power",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_power_low",
                                "name": "Low power"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_power_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_power_high",
                                "name": "High power"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_power_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_power_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_power_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_power_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_power_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_power_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_power_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required power missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_power_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_power_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_power_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_power_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_power_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "PRESENCE",
          "path": "presence",
          "icon": "mdi:location-enter",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_presence",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/presence"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_presence_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for presence?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_presence_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_presence_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_presence_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_presence_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_presence_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_presence_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_presence_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_presence_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_presence_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_presence",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for presence sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for presence sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_presence_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF presence low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_presence",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_presence_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_presence_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_presence_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_presence",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_presence"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_presence_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_presence_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_presence",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_presence",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_presence",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_presence",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_presence_low",
                                "name": "Low presence"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_presence_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_presence_high",
                                "name": "High presence"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_presence_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_presence_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_presence_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_presence_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_presence_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_presence_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_presence_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required presence missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_presence_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_presence_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_presence_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_presence_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_presence_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "PROBLEM",
          "path": "problem",
          "icon": "mdi:alert-circle",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_problem",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/problem"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_problem_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for problem?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_problem_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_problem_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_problem_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_problem_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_problem_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_problem_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_problem_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_problem_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_problem_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_problem",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for problem sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for problem sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_problem_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF problem low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_problem",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_problem_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_problem_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_problem_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_problem",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_problem"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_problem_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_problem_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_problem",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_problem",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_problem",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_problem",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_problem_low",
                                "name": "Low problem"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_problem_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_problem_high",
                                "name": "High problem"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_problem_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_problem_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_problem_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_problem_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_problem_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_problem_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_problem_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required problem missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_problem_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_problem_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_problem_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_problem_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_problem_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "SAFETY",
          "path": "safety",
          "icon": "mdi:safe",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_safety",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/safety"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_safety_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for safety?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_safety_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_safety_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_safety_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_safety_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_safety_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_safety_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_safety_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_safety_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_safety_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_safety",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for safety sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for safety sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_safety_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF safety low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_safety",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_safety_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_safety_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_safety_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_safety",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_safety"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_safety_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_safety_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_safety",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_safety",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_safety",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_safety",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_safety_low",
                                "name": "Low safety"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_safety_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_safety_high",
                                "name": "High safety"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_safety_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_safety_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_safety_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_safety_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_safety_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_safety_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_safety_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required safety missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_safety_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_safety_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_safety_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_safety_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_safety_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "SMOKE",
          "path": "smoke",
          "icon": "mdi:smoke-detector",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_smoke",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/smoke"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_smoke_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for smoke?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_smoke_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_smoke_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_smoke_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_smoke_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_smoke_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_smoke_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_smoke_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_smoke_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_smoke_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_smoke",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for smoke sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for smoke sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_smoke_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF smoke low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_smoke",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_smoke_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_smoke_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_smoke_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_smoke",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_smoke"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_smoke_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_smoke_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_smoke",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_smoke",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_smoke",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_smoke",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_smoke_low",
                                "name": "Low smoke"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_smoke_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_smoke_high",
                                "name": "High smoke"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_smoke_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_smoke_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_smoke_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_smoke_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_smoke_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_smoke_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_smoke_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required smoke missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_smoke_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_smoke_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_smoke_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_smoke_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_smoke_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "TAMPER",
          "path": "tamper",
          "icon": "mdi:gesture-tap",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_tamper",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/tamper"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_tamper_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for tamper?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_tamper_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_tamper_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_tamper_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_tamper_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_tamper_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_tamper_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_tamper_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_tamper_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_tamper_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_tamper",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for tamper sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for tamper sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_tamper_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF tamper low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_tamper",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_tamper_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_tamper_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_tamper_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_tamper",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_tamper"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_tamper_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_tamper_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_tamper",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_tamper",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_tamper",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_tamper",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_tamper_low",
                                "name": "Low tamper"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_tamper_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_tamper_high",
                                "name": "High tamper"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_tamper_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_tamper_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_tamper_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_tamper_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_tamper_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_tamper_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_tamper_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required tamper missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_tamper_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_tamper_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_tamper_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_tamper_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_tamper_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "TEMPERATURE",
          "path": "temperature",
          "icon": "mdi:thermometer",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_temperature",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/temperature"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_temperature_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for temperature?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_temperature_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_temperature_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_temperature_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_temperature_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_temperature_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_temperature_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_temperature_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_temperature_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_temperature_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_temperature",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for temperature sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for temperature sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_temperature_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF temperature low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_temperature",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_temperature_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_temperature_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_temperature_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_temperature",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_temperature"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_temperature_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_temperature_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_temperature",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_temperature",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_temperature",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_temperature",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_temperature_low",
                                "name": "Low temperature"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_temperature_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_temperature_high",
                                "name": "High temperature"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_temperature_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_temperature_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_temperature_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_temperature_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_temperature_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_temperature_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_temperature_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required temperature missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_temperature_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_temperature_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_temperature_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_temperature_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_temperature_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "UPDATE",
          "path": "update",
          "icon": "mdi:update",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_update",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/update"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_update_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for update?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_update_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_update_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_update_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_update_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_update_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_update_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_update_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_update_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_update_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_update",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for update sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for update sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_update_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF update low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_update",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_update_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_update_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_update_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_update",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_update"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_update_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_update_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_update",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_update",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_update",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_update",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_update_low",
                                "name": "Low update"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_update_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_update_high",
                                "name": "High update"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_update_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_update_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_update_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_update_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_update_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_update_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_update_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required update missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_update_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_update_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_update_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_update_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_update_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "VIBRATION",
          "path": "vibration",
          "icon": "mdi:vibrate",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_vibration",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/vibration"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_vibration_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for vibration?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_vibration_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_vibration_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_vibration_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_vibration_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_vibration_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_vibration_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_vibration_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_vibration_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_vibration_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_vibration",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for vibration sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for vibration sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_vibration_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF vibration low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_vibration",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_vibration_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_vibration_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_vibration_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_vibration",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_vibration"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_vibration_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_vibration_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_vibration",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_vibration",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_vibration",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_vibration",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_vibration_low",
                                "name": "Low vibration"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_vibration_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_vibration_high",
                                "name": "High vibration"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_vibration_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_vibration_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_vibration_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_vibration_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_vibration_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_vibration_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_vibration_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required vibration missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_vibration_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_vibration_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_vibration_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_vibration_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_vibration_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "visible": [],
          "title": "VOLTAGE",
          "path": "voltage",
          "icon": "mdi:lightning-bolt",
          "type": "sidebar",
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "view_layout": {
                "position": "sidebar"
              },
              "cards": [
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:view-dashboard",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/"
                  }
                },
                {
                  "type": "button",
                  "name": " ",
                  "icon": "mdi:message-badge",
                  "show_state": false,
                  "entity": "binary_sensor.motion_alarm_voltage",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/lovelace-primary/voltage"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:devices",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "navigate",
                    "navigation_path": "/notify-devices"
                  }
                },
                {
                  "type": "button",
                  "name": "",
                  "icon": "mdi:home-search-outline",
                  "icon_height": "32px",
                  "tap_action": {
                    "action": "call-service",
                    "service": "automation.trigger",
                    "target": {
                      "entity_id": "automation.motion_device_voltage_rescan"
                    },
                    "confirmation": {
                      "text": "Scan for voltage?",
                      "exemptions": null
                    }
                  }
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_voltage_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "type": "markdown",
                "title": "",
                "entity_id": "binary_sensor.motion_device_voltage_exist",
                "content": "{{ state_attr(\"binary_sensor.motion_device_voltage_exist\",\"markdown\") }}"
              }
            },
            {
              "type": "vertical-stack",
              "title": "",
              "cards": [
                {
                  "type": "entities",
                  "title": "Alarms",
                  "show_header_toggle": false,
                  "entities": [
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_low",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_low",
                        "name": "Below limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer-slow",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_low_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_high",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_high",
                        "name": "Above limit",
                        "secondary_info": "last-updated",
                        "icon": "mdi:speedometer",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_high_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_good",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_good",
                        "name": "Good",
                        "secondary_info": "last-updated",
                        "icon": "mdi:thumb-up",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_good_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_bad",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_bad",
                        "name": "Bad",
                        "secondary_info": "last-updated",
                        "icon": "mdi:alert",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_bad_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_activity",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_activity",
                        "name": "Activity",
                        "secondary_info": "last-updated",
                        "icon": "mdi:motion-sensor",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_activity_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_unavailable",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_unavailable",
                        "name": "Unavailable",
                        "secondary_info": "last-updated",
                        "icon": "mdi:home-minus",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_unavailable_notify"
                          }
                        }
                      }
                    },
                    {
                      "type": "conditional",
                      "conditions": [
                        {
                          "entity": "binary_sensor.motion_device_voltage_missing",
                          "state": "on"
                        }
                      ],
                      "row": {
                        "entity": "binary_sensor.motion_device_voltage_missing",
                        "name": "Missing",
                        "secondary_info": "last-updated",
                        "icon": "mdi:cancel",
                        "type": "attribute",
                        "attribute": "details",
                        "tap_action": {
                          "action": "call-service",
                          "service": "automation.trigger",
                          "target": {
                            "entity_id": "automation.motion_device_voltage_missing_notify"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_voltage_exist",
                  "state_not": "unknown"
                }
              ],
              "card": {
                "view_layout": {
                  "position": "sidebar"
                },
                "type": "vertical-stack",
                "title": "",
                "cards": [
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_voltage_status",
                        "state_not": "unknown"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage",
                                  "state_not": "unknown"
                                },
                                {
                                  "entity": "binary_sensor.motion_device_voltage_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_voltage",
                                "secondary_info": "last-updated"
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage",
                              "name": "Total",
                              "type": "attribute",
                              "icon": "mdi:counter",
                              "attribute": "total",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_rescan"
                                },
                                "confirmation": {
                                  "text": "Rescan for voltage sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Required",
                              "type": "attribute",
                              "icon": "mdi:check",
                              "attribute": "required",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_required_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_required_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF requirement for voltage sensors?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Alarm",
                              "type": "attribute",
                              "icon": "mdi:alarm",
                              "attribute": "alarm",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_alarm_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_alarm_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage alarms?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Good",
                              "type": "attribute",
                              "icon": "mdi:thumb-up",
                              "attribute": "good",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_good_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_good_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage good alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Bad",
                              "type": "attribute",
                              "icon": "mdi:thumb-down",
                              "attribute": "bad",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_bad_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_bad_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage bad alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "High",
                              "type": "attribute",
                              "icon": "mdi:speedometer",
                              "attribute": "high",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_high_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_high_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage high alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Low",
                              "type": "attribute",
                              "icon": "mdi:speedometer-slow",
                              "attribute": "low",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_low_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_low_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage low alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Activity",
                              "type": "attribute",
                              "icon": "mdi:motion-sensor",
                              "attribute": "activity",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_activity_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_activity_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage activity alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Spike (high)",
                              "type": "attribute",
                              "icon": "mdi:arrow-up",
                              "attribute": "high_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_high_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_high_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage high_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage_exist",
                              "name": "Spike (low)",
                              "type": "attribute",
                              "icon": "mdi:arrow-down",
                              "attribute": "low_spike",
                              "tap_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_low_spike_on"
                                }
                              },
                              "hold_action": {
                                "action": "call-service",
                                "service": "automation.trigger",
                                "target": {
                                  "entity_id": "automation.motion_device_voltage_low_spike_off"
                                },
                                "confirmation": {
                                  "text": "Turn OFF voltage low_spike alarm?"
                                }
                              }
                            },
                            {
                              "entity": "binary_sensor.motion_device_voltage",
                              "name": "Devices",
                              "icon": "mdi:devices",
                              "type": "attribute",
                              "attribute": "ids"
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_unavailable",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_voltage_unavailable",
                                "name": "Unavailable",
                                "icon": "mdi:network-off",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_bad",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_voltage_bad",
                                "name": "Detected",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "entity": "binary_sensor.motion_device_voltage_measurement",
                        "state": "on"
                      }
                    ],
                    "card": {
                      "type": "vertical-stack",
                      "cards": [
                        {
                          "title": "",
                          "type": "entities",
                          "entities": [
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_voltage",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "secondary_info": "last-updated",
                                "entity": "sensor.motion_device_voltage"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_low",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_voltage_low",
                                "name": "Below limit",
                                "icon": "mdi:alert-minus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_high",
                                  "state": "on"
                                }
                              ],
                              "row": {
                                "entity": "binary_sensor.motion_device_voltage_high",
                                "name": "Above limit",
                                "icon": "mdi:alert-plus",
                                "type": "attribute",
                                "attribute": "details"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_voltage",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_voltage",
                                "name": "Minimum",
                                "type": "attribute",
                                "attribute": "min"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "sensor.motion_device_voltage",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "sensor.motion_device_voltage",
                                "name": "Maximum",
                                "type": "attribute",
                                "attribute": "max"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_low",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_voltage_low",
                                "name": "Low voltage"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "binary_sensor.motion_device_voltage_high",
                                  "state_not": "none"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_voltage_high",
                                "name": "High voltage"
                              }
                            },
                            {
                              "type": "conditional",
                              "conditions": [
                                {
                                  "entity": "input_number.motion_device_voltage_stdev",
                                  "state_not": "none"
                                },
                                {
                                  "entity": "input_number.motion_device_voltage_stdev",
                                  "state_not": "unknown"
                                }
                              ],
                              "row": {
                                "entity": "input_number.motion_device_voltage_stdev",
                                "name": "Spike detection"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  },
                  {
                    "type": "horizontal-stack",
                    "view_layout": {
                      "position": "sidebar"
                    },
                    "cards": [
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_toggle",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Toggle",
                          "icon": "mdi:toggle-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_toggle"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_turn_off",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Off",
                          "icon": "mdi:light-switch-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_turn_off"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_turn_on",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "On",
                          "icon": "mdi:light-switch",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_turn_on"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_self_test",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Self test",
                          "icon": "mdi:progress-check",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_self_test"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_mute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Mute",
                          "icon": "mdi:volume-off",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_mute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_unmute",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Unmute",
                          "icon": "mdi:volume-high",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_unmute"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_update",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Update",
                          "icon": "mdi:update",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_update"
                            }
                          }
                        }
                      },
                      {
                        "type": "conditional",
                        "conditions": [
                          {
                            "entity": "binary_sensor.motion_device_voltage_restart",
                            "state": "on"
                          }
                        ],
                        "card": {
                          "type": "button",
                          "name": "Restart",
                          "icon": "mdi:restart",
                          "icon_height": "32px",
                          "tap_action": {
                            "action": "call-service",
                            "service": "automation.trigger",
                            "target": {
                              "entity_id": "automation.motion_device_voltage_restart"
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "conditional",
              "conditions": [
                {
                  "entity": "binary_sensor.motion_device_voltage_exist",
                  "state": "off"
                },
                {
                  "entity": "binary_sensor.motion_device_voltage_required",
                  "state": "on"
                }
              ],
              "card": {
                "type": "vertical-stack",
                "view_layout": {
                  "position": "sidebar"
                },
                "cards": [
                  {
                    "title": "Required voltage missing",
                    "type": "glance",
                    "entities": []
                  },
                  {
                    "type": "button",
                    "name": "Rescan",
                    "icon": "mdi:redo",
                    "icon_height": "32px",
                    "tap_action": {
                      "action": "call-service",
                      "service": "automation.trigger",
                      "target": {
                        "entity_id": "automation.motion_device_voltage_rescan"
                      }
                    }
                  }
                ]
              }
            },
            {
              "type": "horizontal-stack",
              "title": "",
              "view_layout": {
                "position": "main"
              },
              "cards": [
                {
                  "type": "conditional",
                  "conditions": [
                    {
                      "entity": "binary_sensor.motion_device_voltage_high_spike",
                      "state_not": "none"
                    },
                    {
                      "entity": "binary_sensor.motion_device_voltage_low_spike",
                      "state_not": "none"
                    }
                  ],
                  "card": {
                    "title": "Range",
                    "chart_type": "line",
                    "period": "day",
                    "days_to_show": 30,
                    "type": "statistics-graph",
                    "entities": [
                      {
                        "name": "High",
                        "entity": "sensor.motion_device_voltage_high_spike"
                      },
                      {
                        "name": "Low",
                        "entity": "sensor.motion_device_voltage_low_spike"
                      }
                    ],
                    "stat_types": [
                      "min",
                      "mean",
                      "max"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  }
}
